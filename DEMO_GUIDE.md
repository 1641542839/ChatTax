# 🎬 Checklist API 功能演示

## 快速演示（5分钟）

### 第 1 步：启动服务

```powershell
# 终端 1 - 启动后端
cd D:\Projects\project\ChatTax\Backend
.\venv\Scripts\activate
uvicorn main:app --reload

# 终端 2 - 启动前端
cd D:\Projects\project\ChatTax\Frontend
npm run dev
```

---

### 第 2 步：生成个性化清单

1. **打开浏览器**: http://localhost:3000/checklist/generate

2. **填写表单**:
   ```
   就业状态: 在职员工
   收入来源: ☑️ 工资收入  ☑️ 投资收入
   行业: 科技
   地区: 新南威尔士州 (NSW)
   
   ☑️ 有抚养人
   ☑️ 有投资资产
   ☑️ 有家庭办公室
   ```

3. **点击**: "生成个性化清单" 按钮

4. **等待**: 约 3-5 秒，AI 正在生成...

5. **结果**: 自动跳转到清单页面，显示 10 个个性化任务！

---

### 第 3 步：查看清单

清单页面应该显示：

```
✅ Tax Preparation Checklist  🔗 API #5

Overall Progress
0 / 10                                    [████░░░░░░] 0%

Filter: [All] [To Do] [Doing] [Done]

┌─────────────────────────────────────────┐
│ ⚪ [documents] Gather Income Statements  │
│    🔴 HIGH                               │
│    Collect your PAYG summaries...       │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│ ⚪ [deductions] Claim Home Office...     │
│    🔴 HIGH                               │
│    Calculate your home office expenses...│
└─────────────────────────────────────────┘

... (8 more tasks)
```

---

### 第 4 步：更新任务状态

1. **点击第一个任务的复选框**
   - 状态立即变为 "DOING" 🔵
   - 后台同步到服务器
   - 显示 toast: "✅ 状态已更新为 doing"

2. **再次点击复选框**
   - 状态变为 "DONE" ✅
   - 背景变为绿色
   - 标题显示删除线
   - 进度条更新: 1 / 10 (10%)

3. **继续点击几个任务**
   - 观察进度条实时更新
   - 观察颜色从蓝色渐变到绿色

---

### 第 5 步：验证后端同步

打开新的 PowerShell 终端：

```powershell
cd Backend

# 方法 1: 通过 API 查看
curl http://localhost:8000/api/checklist/user/1

# 方法 2: 运行测试脚本
python debug_patch.py
```

**结果**: 应该看到状态已经保存在数据库中！

---

## 🎥 完整演示流程

### 场景：新员工报税

**角色**: 张三，科技行业员工，有投资收入和家庭办公室

#### Step 1: 生成清单（20秒）
```
1. 访问 /checklist/generate
2. 选择 "在职员工"
3. 勾选 "工资收入" + "投资收入"
4. 选择 "科技" 行业
5. 勾选 "有家庭办公室"
6. 点击 "生成清单"
```

**AI 生成结果**:
- ✅ 收集工资单据（高优先级）
- ✅ 申请家庭办公室抵扣（高优先级）
- ✅ 整理投资收入记录（中优先级）
- ... 共 10 个任务

#### Step 2: 执行任务（30秒）
```
1. 点击 "收集工资单据" ✅
   → 状态: todo → doing → done
   
2. 点击 "申请家庭办公室抵扣" ✅
   → 状态: done
   
3. 点击 "整理投资收入记录" ✅
   → 状态: done
```

**进度更新**: 0% → 30% → 进度条变绿 🎉

#### Step 3: 过滤查看（10秒）
```
1. 点击 "Done" 过滤器
   → 只显示已完成的 3 个任务
   
2. 点击 "To Do" 过滤器
   → 显示剩余的 7 个待办任务
```

#### Step 4: 刷新数据（5秒）
```
1. 点击 "刷新" 按钮
   → 从服务器重新加载
   → 所有状态都被保留
```

---

## 🎯 演示要点

### 1. **AI 个性化**
强调：
- AI 根据用户情况生成不同的清单
- 有家庭办公室 → 生成家庭办公室抵扣任务
- 有投资 → 生成投资收入整理任务
- 首次报税 vs 老用户 → 不同的任务

### 2. **实时同步**
强调：
- 点击复选框 → 立即更新 UI（乐观更新）
- 后台异步同步到服务器
- 刷新页面 → 状态仍然保留
- 多设备查看 → 状态一致

### 3. **智能降级**
演示：
- 关闭后端服务
- 刷新前端页面
- 自动使用本地数据
- 功能仍然可用
- 显示 "📁 本地数据" 标签

### 4. **用户体验**
展示：
- 美观的 UI 设计
- 清晰的状态指示
- 流畅的动画效果
- 友好的错误提示

---

## 📸 截图示例

### 生成页面
```
┌────────────────────────────────────────────┐
│  🚀  生成个性化税务清单                      │
│                                            │
│  根据您的具体情况，AI 将为您生成专属的       │
│  税务准备清单                               │
├────────────────────────────────────────────┤
│                                            │
│  👤 就业状态                                │
│  [在职员工 ▼]                              │
│                                            │
│  💰 收入来源（可多选）                       │
│  [工资收入] [投资收入] [租金收入]            │
│                                            │
│  🏢 行业（可选）                            │
│  [科技 ▼]                                  │
│                                            │
│  📍 所在地区（可选）                         │
│  [新南威尔士州 (NSW) ▼]                     │
│                                            │
│  🏠 其他信息                                │
│  ☑️ 有抚养人                                │
│  ☑️ 有投资资产                              │
│  ☑️ 有家庭办公室                            │
│                                            │
│  [🚀 生成个性化清单]                        │
│                                            │
└────────────────────────────────────────────┘
```

### 清单页面
```
┌────────────────────────────────────────────┐
│  ✅ Tax Preparation Checklist 🔗 API #5     │
│     [🚀 生成新清单] [🔄 刷新]                │
├────────────────────────────────────────────┤
│  ✅ Overall Progress         3 / 10         │
│  [████████░░░░░░░░░░░░] 30% Complete       │
│  3 tasks remaining                         │
├────────────────────────────────────────────┤
│  Filter: [All] [To Do] [Doing] [Done]      │
├────────────────────────────────────────────┤
│  ✅ Gather Income Statements               │
│     ✅ DONE  🔴 HIGH  📄 documents          │
│     Collect your PAYG summaries...         │
├────────────────────────────────────────────┤
│  ⚪ Claim Home Office Deductions            │
│     ⚪ TODO  🔴 HIGH  💰 deductions          │
│     Calculate your home office expenses... │
└────────────────────────────────────────────┘
```

---

## 🎤 演讲稿示例

> "大家好，今天展示 ChatTax 的智能清单功能。
>
> 首先，用户填写一个简单的表单，告诉我们他的税务情况。
> 比如，他是在职员工，有工资和投资收入，还有家庭办公室。
>
> 点击生成后，AI 会根据这些信息，自动生成 10 个个性化的任务。
> 你看，这里有'收集工资单据'、'申请家庭办公室抵扣'等等。
>
> 用户只需要点击复选框，就可以标记任务完成。
> 注意看，进度条会实时更新，从 0% 到 30%。
>
> 最重要的是，所有这些状态都会自动保存到数据库。
> 即使刷新页面，或者在另一台设备上打开，
> 所有的进度都会被保留。
>
> 如果后端服务不可用，系统也会自动降级到本地模式，
> 用户体验不受影响。
>
> 这就是 ChatTax 的智能清单功能，谢谢！"

---

## ✅ 演示检查清单

演示前确认：

- [ ] 后端服务运行正常
- [ ] 前端服务运行正常
- [ ] OpenAI API Key 已设置
- [ ] 数据库已初始化
- [ ] 浏览器开发者工具打开（Network 标签）
- [ ] 准备好示例数据
- [ ] 清理旧的测试数据

演示中注意：

- [ ] 清晰解释每个步骤
- [ ] 等待 AI 生成完成
- [ ] 展示实时同步效果
- [ ] 演示过滤功能
- [ ] 展示进度更新
- [ ] 演示错误处理（可选）

---

## 🎬 开始演示！

**准备好了吗？**

1. 启动服务 ✅
2. 打开浏览器 ✅
3. 深呼吸 😊
4. 开始！🚀

**祝演示成功！** 🎉
